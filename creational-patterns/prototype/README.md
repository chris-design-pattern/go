Prototype
---
## Intent

**Prototype**은 코드를 클래스에 종속시키지 않고 기존 객체를 복사 할 수있는 생성 디자인 패턴입니다.

![](https://images.velog.io/images/chrishan/post/2f76162b-0a2b-4bd6-b155-aedab4937ce0/prototype-2x.png)

## Structure

##### Basic implementation
![](https://images.velog.io/images/chrishan/post/e3bf03e1-b135-412b-bde1-37d023293e91/Screen%20Shot%202021-05-16%20at%209.20.04.png)

##### Prototype registry implementation
![](https://images.velog.io/images/chrishan/post/4014a845-0cce-40ed-b03d-1bc355852c73/Screen%20Shot%202021-05-16%20at%209.21.30.png)

## How to Implement

1. Prototype 인터페이스를 만들고 그 안에 `clone` method를 선언합니다. 또는 기존 클래스 계층 구조의 모든 클래스 (있는 경우)에 메서드를 추가하면 됩니다.<br /><br />

2. Prototype 클래스는 해당 클래스의 객체를 인수로 받아들이는 대체 생성자를 정의해야합니다. 생성자는 전달 된 객체에서 새로 생성 된 인스턴스로 클래스에 정의 된 모든 필드의 값을 복사해야 합니다. 하위 클래스를 변경하는 경우 상위 생성자를 호출하여 상위 클래스가 전용 필드의 복제를 처리하도록 해야 합니다.<br /><br />프로그래밍 언어가 메서드 오버로딩을 지원하지 않는 경우 개체 데이터를 복사하기 위한 특수 메서드를 정의 할 수 있습니다. 생성자는 `new` 연산자를 호출 한 직후에 결과 객체를 전달하므로 이 작업을 수행하기 더 편리한 곳입니다.<br /><br />

3. 복제 방법은 일반적으로 한 줄로 구성됩니다. 생성자의 prototype 버전으로 `new` 연산자를 실행합니다. 모든 클래스는 복제 방법을 명시적으로 재정의하고 `new` 연산자와 함께 자체 클래스 이름을 사용해야 합니다. 그렇지 않으면 복제 메서드가 부모 클래스의 개체를 생성 할 수 있습니다.<br /><br />

4. 선택적으로 중앙 집중식 프로토 타입 레지스트리를 만들어 자주 사용되는 프로토 타입의 카탈로그를 저장합니다.<br /><br />레지스트리를 새 팩토리 클래스로 구현하거나 프로토 타입을 가져 오기위한 정적 메소드를 사용하여 기본 프로토 타입 클래스에 넣을 수 있습니다. 이 메서드는 클라이언트 코드가 메서드에 전달하는 검색 기준에 따라 프로토 타입을 검색해야합니다. 기준은 단순 문자열 태그이거나 복잡한 검색 매개 변수 세트 일 수 있습니다. 적절한 프로토 타입을 찾으면 레지스트리에서이를 복제하고 사본을 클라이언트에 반환해야합니다.<br /><br />마지막으로 하위 클래스의 생성자에 대한 직접 호출을 프로토 타입 레지스트리의 팩토리 메서드에 대한 호출로 바꿉니다.

## Pros and Cons

<span style="color:green;">O</span>. 구체적인 클래스에 연결하지 않고 객체를 복제 할 수 있습니다.<br /><br />
<span style="color:green;">O</span>. 미리 빌드 된 프로토 타입을 복제하기 위해 반복되는 초기화 코드를 제거 할 수 있습니다.<br /><br />
<span style="color:green;">O</span>. 복잡한 개체를 보다 편리하게 제작할 수 있습니다.<br /><br />
<span style="color:green;">O</span>. 복잡한 개체에 대한 구성 사전 설정을 처리 할 때 상속 대신 사용할 수 있습니다.<br /><br />
<span style="color:red;">X</span>. 순환 참조가 있는 복잡한 개체를 복제하는 것은 매우 까다로울 수 있습니다.